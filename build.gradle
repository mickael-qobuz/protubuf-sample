apply plugin: "com.android.application"
apply plugin: "com.google.protobuf"

buildscript {
    repositories {
        google()
        maven {
            url = uri("https://plugins.gradle.org/m2/")
        }
    }
    dependencies {
        classpath "com.android.tools.build:gradle:7.1.3"
        classpath "com.google.protobuf:protobuf-gradle-plugin:0.9.3"
    }
}

android {
    compileSdkVersion 33
    defaultConfig {
        minSdkVersion 24
        targetSdkVersion 33
    }
    dexOptions {
        preDexLibraries false
    }
    variantFilter {
        if (it.buildType.name.toLowerCase(Locale.ENGLISH) == "release") {
            ignore = true
        }
    }
}

protobuf {
    protoc {
        artifact = "com.google.protobuf:protoc:3.22.3"
    }
    generateProtoTasks {
        all().each { task ->
            task.builtins {
                java {
                    option "lite"
                }
            }
        }
    }
}

repositories {
    google()
    maven {
        url = uri("https://plugins.gradle.org/m2/")
    }
}

dependencies {
    implementation "com.google.protobuf:protobuf-javalite:3.22.3"
}
